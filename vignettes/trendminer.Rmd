---
title: "Introduction to the TrendMiner R package"
author: "Alexander Lemm"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{trendminer}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
NOT_CRAN <- identical(tolower(Sys.getenv("NOT_CRAN")), "true")
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  purl = NOT_CRAN,
  eval = NOT_CRAN
)
```

TrendMiner is an industrial self-service analytics platform for analyzing, monitoring and predicting time-series based process and asset data. The trendminer R package allows access to selected endpoints of the TrendMiner API which is documented here: http://developer.trendminer.com/apidocs/index.html.

This vignette provides a brief introduction to the trendminer R package, highlighting the following key details of its use:

* Connecting to a TrendMiner instance from an interactive R session
* Fetching time-series data of specific tags  


## Authentication 

All requests to the TrendMiner API require authentication. This is achieved by sending a valid Bearer access token in the request headers. Request tokens are obtained via OAuth2.0 using the Resource Owner Password Credentials flow. That means that any client which likes to interact with the API needs to collect the credentials from the user (username and password) first before passing them together with its own client credentials (client ID and client secret) to the server. The server responds with an access token which the user needs to use for any subsequent API request. 

**Note**: You can request your client ID and client secret by contacting TrendMiner support or your TrendMiuner Customer Success Manager.

User credentials, client credentials and the TrendMiner base URL can be passed as arguments to `tm_get_token()` for quick testing in interactive mode. 

```{r eval=FALSE}
tm_get_token(client_id = "YOUR_CLIENT_ID_HERE", 
             client_secret = "YOUR_CLIENT_SECRET_HERE", 
             usr_name = "YOUR_USER_NAME_HERE", 
             usr_pwd = "YOUR_USER_PASSWORD_HERE", 
             base_url = "YOUR_TM_BASE_URL_HERE")
```

However, it is recommended to call `tm_get_token()` without arguments. In this case `tm_get_token()` will fetch the credentials and the TrendMiner base URL from the environment variables specified below which you need to store in `.Renviron`. You can easily edit `.Renviron` using `usethis::edit_r_environ()`.

``` {r eval=FALSE}
TM_client_ID = YOUR_CLIENT_ID_HERE
TM_secret = YOUR_CLIENT_SECRET_HERE
TM_usr = YOUR_USER_NAME_HERE
TM_pwd = YOUR_USER_PASSWORD_HERE
TM_base_url = YOUR_TM_BASE_URL_HERE
```

